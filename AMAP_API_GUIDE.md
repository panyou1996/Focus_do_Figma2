# 高德地图API配置指南

## 获取API密钥

1. 访问 [高德开放平台](https://console.amap.com/)
2. 注册并登录账号
3. 创建新应用：
   - 应用名称：Focus Do Blog
   - **重要：应用类型选择"Web端（JS API）"而不是"Web服务"**
   - 平台选择：Web端（JS API）

## 配置步骤

### 1. 创建环境变量文件
```bash
# 复制示例文件
cp .env.example .env
```

### 2. 编辑.env文件
```env
# 将your_amap_api_key_here替换为你的实际API密钥
VITE_AMAP_API_KEY=你的高德地图API密钥

# Supabase配置（如果需要）
VITE_SUPABASE_URL=你的Supabase项目URL
VITE_SUPABASE_ANON_KEY=你的Supabase匿名密钥
```

### 3. 重启开发服务器
```bash
npm run dev
```

## 常见错误及解决方案

### INVALID_USER_SIGNATURE 错误

**原因：**
1. API密钥类型选择错误（选了"Web服务"而不是"Web端(JS API)"）
2. API密钥没有正确配置服务范围
3. 需要配置数字签名验证

**解决方案：**

#### 方案 1：重新创建正确类型的API密钥
1. 在高德控制台创建新应用
2. **应用类型选择"Web端（JS API）"**
3. 配置服务范围：勾选"Web服务API"
4. 将新的API Key更新到.env文件

#### 方案 2：使用备用功能
应用已经内置了备用方案：
- 如果API验证失败，会自动显示基础坐标信息
- 用户可以使用快捷位置选择或手动输入

## API服务说明

### 使用的API接口

1. **逆地理编码API** - 获取当前位置
   - 接口：`/v3/geocode/regeo`
   - 用途：将经纬度转换为地址信息

2. **地点搜索API** - 搜索位置
   - 接口：`/v3/place/text`
   - 用途：根据关键词搜索地点

### 错误处理

常见错误及解决方案：

- **API密钥无效**：检查密钥是否正确配置
- **服务配额不足**：检查API调用次数是否超出限制
- **网络错误**：检查网络连接和跨域设置

## 备用方案

如果高德地图API不可用，应用提供以下备用功能：

1. **快捷位置选择**：预设的常用位置（家、公司、学校等）
2. **手动输入**：用户可以直接输入位置信息
3. **跳过位置**：位置信息为可选项，可以不填写

## 隐私说明

- 位置信息仅在用户主动点击"获取当前位置"时才会访问
- 所有位置数据仅用于博客发布功能
- 不会在后台自动获取位置信息